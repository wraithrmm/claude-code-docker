{
  "hooks": {
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Evaluate whether Claude should be allowed to stop, or needs to run tests/linters first.\n\nContext is provided via stdin as JSON with stop_hook_active and transcript_path fields.\n\nIf stop_hook_active is true, Claude should be allowed to stop.\n\nOtherwise, read the transcript JSONL file at transcript_path and check:\n1. Were code changes made? Look for tool calls named Edit, Write, or MultiEdit.\n2. If code changes were made, was testing performed? Look for Task tool calls where subagent_type is lint-runner or unit-test-runner.\n\nClaude should be allowed to stop if: no code changes were made, OR testing was performed.\n\nClaude should NOT be allowed to stop if: code changes were made but neither lint-runner nor unit-test-runner sub-agents were invoked. The reason is: Code changes were detected but tests/linters have not been run. Please use the lint-runner and unit-test-runner sub-agents to validate your changes.",
            "timeout": 30
          }
        ]
      }
    ]
  },
  "permissions": {
    "allow": [
      "WebSearch",
      "WebFetch(domain:*)",
      "LS(/workspace/project/ai-playground)",
      "LS(/workspace/project/ai-playground/**)",
      "Read(/workspace/project/ai-playground/**)",
      "Write(/workspace/project/ai-playground/**)",
      "Edit(/workspace/project/ai-playground/**)",
      "MultiEdit(/workspace/project/ai-playground/**)",
      "Bash(/workspace/.claude/bin/init-playground:*)",
      "Bash(/workspace/.claude/bin/list-projects:*)",
      "Bash(/workspace/.claude/bin/continue-project:*)",
      "Bash(/workspace/.claude/bin/create-project:*)",
      "Bash(/workspace/.claude/bin/verify-project:*)",
      "Bash(/workspace/.claude/bin/count-projects:*)",
      "Bash(/workspace/.claude/bin/create-task:*)",
      "Bash(/workspace/.claude/bin/list-tasks:*)",
      "Bash(/workspace/.claude/bin/move-task:*)",
      "Bash(/workspace/.claude/bin/create-project-task:*)",
      "Bash(/workspace/.claude/bin/list-project-tasks:*)",
      "Bash(/workspace/.claude/bin/move-project-task:*)",
      "Bash(/workspace/.claude/bin/git-diff.sh:*)",
      "Bash(/workspace/.claude/bin/run-linters:*)",
      "Bash(/workspace/.claude/bin/run-tests:*)",
      "Bash(.claude/bin/run-linters:*)",
      "Bash(.claude/bin/run-tests:*)",
      "Bash(npx playwright:*)",
      "Bash(npx @playwright/test:*)",
      "Bash(playwright:*)"
    ],
    "deny": [
      "Read(**/.env)",
      "Read(**/.env*)",
      "Read(**/dotenv)",
      "Read(**/*dotenv)",
      "Read(**/env)",
      "Read(**/*sites*.ini*)"
    ]
  },
  "env": {
    "DISABLE_TELEMETRY": "1",
    "DISABLE_BUG_COMMAND": "1",
    "DISABLE_ERROR_REPORTING": "1"
  }
}