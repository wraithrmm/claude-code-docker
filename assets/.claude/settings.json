{
  "hooks": {
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "You are evaluating whether Claude Code should stop or be reminded to run tests/linters.\n\nContext is provided via stdin as JSON with these fields:\n- stop_hook_active: If true, Claude is already continuing from a previous stop hook - you MUST allow stopping\n- transcript_path: Path to the session transcript JSONL file\n\nYour task:\n1. If stop_hook_active is true, respond: {\"decision\": \"approve\"}\n2. Read and parse the transcript JSONL file at transcript_path\n3. Check if code changes were made by looking for tool calls named \"Edit\", \"Write\", or \"MultiEdit\"\n4. If code changes were found, check if testing was performed by looking for Task tool calls where subagent_type is \"lint-runner\" or \"unit-test-runner\"\n5. If code changes were made but neither lint-runner nor unit-test-runner sub-agents were invoked, respond:\n   {\"decision\": \"block\", \"reason\": \"Code changes were detected but tests/linters have not been run. Please use the lint-runner and unit-test-runner sub-agents to validate your changes. These sub-agents use the run-tests and run-linters helper scripts to ensure deterministic, comprehensive coverage.\"}\n6. If no code changes were made, or if testing was performed, respond: {\"decision\": \"approve\"}\n\nRespond with valid JSON only, no other text.",
            "timeout": 30
          }
        ]
      }
    ]
  },
  "permissions": {
    "allow": [
      "WebSearch",
      "WebFetch(**)",
      "LS(/workspace/project/ai-playground)",
      "LS(/workspace/project/ai-playground/**)",
      "Read(/workspace/project/ai-playground/**)",
      "Write(/workspace/project/ai-playground/**)",
      "Edit(/workspace/project/ai-playground/**)",
      "MultiEdit(/workspace/project/ai-playground/**)",
      "Bash(/workspace/.claude/bin/init-playground:*)",
      "Bash(/workspace/.claude/bin/list-projects:*)",
      "Bash(/workspace/.claude/bin/continue-project:*)",
      "Bash(/workspace/.claude/bin/create-project:*)",
      "Bash(/workspace/.claude/bin/verify-project:*)",
      "Bash(/workspace/.claude/bin/count-projects:*)",
      "Bash(/workspace/.claude/bin/create-task:*)",
      "Bash(/workspace/.claude/bin/list-tasks:*)",
      "Bash(/workspace/.claude/bin/move-task:*)",
      "Bash(/workspace/.claude/bin/create-project-task:*)",
      "Bash(/workspace/.claude/bin/list-project-tasks:*)",
      "Bash(/workspace/.claude/bin/move-project-task:*)",
      "Bash(/workspace/.claude/bin/git-diff.sh:*)",
      "Bash(/workspace/.claude/bin/run-linters:*)",
      "Bash(/workspace/.claude/bin/run-tests:*)",
      "Bash(.claude/bin/run-linters:*)",
      "Bash(.claude/bin/run-tests:*)",
      "Bash(npx playwright:*)",
      "Bash(npx @playwright/test:*)",
      "Bash(playwright:*)"
    ],
    "deny": [
      "Read(**/.env)",
      "Read(**/.env*)",
      "Read(**/dotenv)",
      "Read(**/*dotenv)",
      "Read(**/env)",
      "Read(**/*sites*.ini*)"
    ]
  },
  "env": {
    "DISABLE_TELEMETRY": "1",
    "DISABLE_BUG_COMMAND": "1",
    "DISABLE_ERROR_REPORTING": "1"
  }
}